YUI.add("moodle-atto_embedquestion-button",function(e,t){var n="atto_embedquestion",r={PARAM:"atto_embedquestion_param"},i={BUTTON:'input[name="embedquestion"]'};e.namespace("M.atto_embedquestion").Button=e.Base.create("button",e.M.editor_atto.EditorPlugin,[],{_currentSelection:null,qForm:null,listening:!1,initializer:function(){var e,t;if(!this.get("enablebutton"))return;e=this.get("contextid"),t=this.get("courseid"),this.addButton({icon:"icon",iconComponent:n,callback:this._displayDialogue}),require(["atto_embedquestion/qform"],function(n){n.setContextId(e),n.setCourseId(t),qForm=n})},_displayDialogue:function(){var t,r;this._currentSelection=this.get("host").getSelection();if(this._currentSelection===!1)return;t=this.get("loadersrc"),r=this.getDialogue({headerContent:M.util.get_string("pluginname",n),focusAfterHide:!0,bodyContent:'<div class="atto-embedquestion-content"><div class="atto-embedquestion-question-selector-wrapper"><img class="icon " src="'+t+'" alt="Loading..." title="Loading..."></div><button class="atto-embedquestion-submit">Embed qcode</button></div>'},!0),qForm.setRootNode(".atto-embedquestion-question-selector-wrapper"),r.show(),qForm.insertQform();if(!this.listening){this.listening=!0;var i=e.all(".atto-embedquestion-submit");i.on("click",this.insertQcode,this)}},insertQcode:function(e){var t=qForm.getQformData(),n="{Q{cat-id-num/que-id-num|id=3|courseid=31}Q}"+t.qcatidnum;this.getDialogue({focusAfterHide:null}).hide();var r=this.get("host");r.setSelection(this._currentSelection),r.insertContentAtFocusPoint(n),this.markUpdated()}},{ATTRS:{enablebutton:{value:!1},contextid:{value:!1},courseid:{value:!1},loadersrc:{value:!1}}})},"@VERSION@",{requires:["moodle-editor_atto-plugin"]});
